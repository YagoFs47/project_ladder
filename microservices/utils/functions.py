from pprint import pp
from typing import Dict, List
from microservices.utils.formulas import tick_back_stake

hash_oposition_side: Dict[str, str] = {
    "back": "lay",
    "lay": "back"
}
odds = [1000.0,
 990.0,
 980.0,
 970.0,
 960.0,
 950.0,
 940.0,
 930.0,
 920.0,
 910.0,
 900.0,
 890.0,
 880.0,
 870.0,
 860.0,
 850.0,
 840.0,
 830.0,
 820.0,
 810.0,
 800.0,
 790.0,
 780.0,
 770.0,
 760.0,
 750.0,
 740.0,
 730.0,
 720.0,
 710.0,
 700.0,
 690.0,
 680.0,
 670.0,
 660.0,
 650.0,
 640.0,
 630.0,
 620.0,
 610.0,
 600.0,
 590.0,
 580.0,
 570.0,
 560.0,
 550.0,
 540.0,
 530.0,
 520.0,
 510.0,
 500.0,
 490.0,
 480.0,
 470.0,
 460.0,
 450.0,
 440.0,
 430.0,
 420.0,
 410.0,
 400.0,
 390.0,
 380.0,
 370.0,
 360.0,
 350.0,
 340.0,
 330.0,
 320.0,
 310.0,
 300.0,
 290.0,
 280.0,
 270.0,
 260.0,
 250.0,
 240.0,
 230.0,
 220.0,
 210.0,
 200.0,
 190.0,
 180.0,
 170.0,
 160.0,
 150.0,
 140.0,
 130.0,
 120.0,
 110.0,
 100.0,
 95.0,
 90.0,
 85.0,
 80.0,
 75.0,
 70.0,
 65.0,
 60.0,
 55.0,
 50.0,
 49.0,
 48.0,
 47.0,
 46.0,
 45.0,
 44.0,
 43.0,
 42.0,
 41.0,
 40.0,
 39.0,
 38.0,
 37.0,
 36.0,
 35.0,
 34.0,
 33.0,
 32.0,
 31.0,
 30.0,
 29.0,
 28.0,
 27.0,
 26.0,
 25.0,
 24.0,
 23.0,
 22.0,
 21.0,
 20.0,
 19.5,
 19.0,
 18.5,
 18.0,
 17.5,
 17.0,
 16.5,
 16.0,
 15.5,
 15.0,
 14.5,
 14.0,
 13.5,
 13.0,
 12.5,
 12.0,
 11.5,
 11.0,
 10.5,
 10.0,
 9.9,
 9.8,
 9.7,
 9.6,
 9.5,
 9.4,
 9.3,
 9.2,
 9.1,
 9.0,
 8.9,
 8.8,
 8.7,
 8.6,
 8.5,
 8.4,
 8.3,
 8.2,
 8.1,
 8.0,
 7.9,
 7.8,
 7.7,
 7.6,
 7.5,
 7.4,
 7.3,
 7.2,
 7.1,
 7.0,
 6.9,
 6.8,
 6.7,
 6.6,
 6.5,
 6.4,
 6.3,
 6.2,
 6.1,
 6.0,
 5.9,
 5.8,
 5.7,
 5.6,
 5.5,
 5.4,
 5.3,
 5.2,
 5.1,
 5.0,
 4.9,
 4.8,
 4.7,
 4.6,
 4.5,
 4.4,
 4.3,
 4.2,
 4.1,
 4.0,
 3.95,
 3.9,
 3.85,
 3.8,
 3.75,
 3.7,
 3.65,
 3.6,
 3.55,
 3.5,
 3.45,
 3.4,
 3.35,
 3.3,
 3.25,
 3.2,
 3.15,
 3.1,
 3.05,
 3.0,
 2.98,
 2.96,
 2.94,
 2.92,
 2.9,
 2.88,
 2.86,
 2.84,
 2.82,
 2.8,
 2.78,
 2.76,
 2.74,
 2.72,
 2.7,
 2.68,
 2.66,
 2.64,
 2.62,
 2.6,
 2.58,
 2.56,
 2.54,
 2.52,
 2.5,
 2.48,
 2.46,
 2.44,
 2.42,
 2.4,
 2.38,
 2.36,
 2.34,
 2.32,
 2.3,
 2.28,
 2.26,
 2.24,
 2.22,
 2.2,
 2.18,
 2.16,
 2.14,
 2.12,
 2.1,
 2.08,
 2.06,
 2.04,
 2.02,
 2.0,
 1.99,
 1.98,
 1.97,
 1.96,
 1.95,
 1.94,
 1.93,
 1.92,
 1.91,
 1.9,
 1.89,
 1.88,
 1.87,
 1.86,
 1.85,
 1.84,
 1.83,
 1.82,
 1.81,
 1.8,
 1.79,
 1.78,
 1.77,
 1.76,
 1.75,
 1.74,
 1.73,
 1.72,
 1.71,
 1.7,
 1.69,
 1.68,
 1.67,
 1.66,
 1.65,
 1.64,
 1.63,
 1.62,
 1.61,
 1.6,
 1.59,
 1.58,
 1.57,
 1.56,
 1.55,
 1.54,
 1.53,
 1.52,
 1.51,
 1.5,
 1.49,
 1.48,
 1.47,
 1.46,
 1.45,
 1.44,
 1.43,
 1.42,
 1.41,
 1.4,
 1.39,
 1.38,
 1.37,
 1.36,
 1.35,
 1.34,
 1.33,
 1.32,
 1.31,
 1.3,
 1.29,
 1.28,
 1.27,
 1.26,
 1.25,
 1.24,
 1.23,
 1.22,
 1.21,
 1.2,
 1.19,
 1.18,
 1.17,
 1.16,
 1.15,
 1.14,
 1.13,
 1.12,
 1.11,
 1.1,
 1.09,
 1.08,
 1.07,
 1.06,
 1.05,
 1.04,
 1.03,
 1.02,
 1.01]

sorted(odds, reverse=True)

def generate_odds_back_lay():
    odds = []
    cont: float = 1.0
    somatorio: float = 0.01
    while cont < 1000:

        data = {"odd": None, "back": "", "lay": "", "available_amount": ""}
        cont = round(somatorio + cont, 2)
        data['odd'] = round(cont, 2)
        odds.append(data.copy())

        if cont >= 100:
            somatorio = 10

        elif cont >= 50:
            somatorio = 5

        elif cont >= 20:
            somatorio = 1

        elif cont >= 10:
            somatorio = .5

        elif cont >= 4:
            somatorio = 0.1

        elif cont >= 3:
            somatorio = 0.05

        elif cont >= 2:
            somatorio = 0.02

    return odds


def compair_odd(dict_odd, price, market):
    if dict_odd["odd"] == price['odds']:
        dict_odd[price['side']] = price['available-amount']
        dict_odd['available_amount'] = price['available-amount']


def generate_matriz_ladder(markets):
    for market in markets:  # para cada mercado
        odds_ladder: List[dict] = generate_odds_back_lay()  # gera uma ladder vazia
        pp(market['runners'][1]['prices'])
        # precisamos preencher a ladder com as odds que est√£o atuando naquele mercado
        # para isso preciso varrer as odds do mercado e introduzir elas na ladder
        for dict_odd in odds_ladder:  # para cada odd da ladder

            for price in market["runners"][1]["prices"]:  # para cada odd do mercado
                compair_odd(dict_odd, price, market)

        # aqui eu inverto a ordem que esta de forma crescente para ordem decrescente
        # FROM DESC TO ASC
        market['ladder'] = list(reversed(odds_ladder.copy()))
